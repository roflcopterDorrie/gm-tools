{"version":3,"sources":["components/Card.js","components/ContentEditable.js","components/LocationList.js","components/CharacterList.js","components/Location.js","components/InteractionList.js","components/Character.js","components/Quest.js","components/MonsterList.js","components/Encounter.js","components/Search.js","components/PlayerStat.js","components/PlayerStats.js","components/Toolbar.js","components/Grid.js","components/EncounterMap.js","components/EncounterTracker.js","App.js","serviceWorker.js","index.js"],"names":["Card","updateData","id","name","value","props","data","componentName","toolbar","tools","type","push","onClick","newCard","className","deleteCard","map","window","open","e","addData","React","PureComponent","ContentEditable","onBlur","evt","hasOwnProperty","target","innerText","trim","Element","this","tag","contentEditable","suppressContentEditableWarning","placeholder","join","content","Component","LocationList","filteredLocations","locations","reduce","accumulator","location","delta","parentId","key","showCard","length","CharacterList","filtered","characters","character","parentType","role","Location","changeMap","setState","mapInput","state","parentLocation","parentLocationData","getData","class","style","float","mapPreview","src","description","allData","InteractionList","console","log","addInteraction","interaction","Character","motivations","weaknesses","Quest","MonsterList","getMonsterList","selectedId","count","onChange","monsterList","monster","deleteMonster","deltaId","monsterId","selectedMonsters","addMonster","concat","acc","index","bind","Encounter","monsters","staticData","tactics","environmental","Search","search","dataStoreTypes","getDataStoreTypes","includes","component","store","item","toLowerCase","icon","PlayerStat","pp","ac","proficiencies","languages","deleteData","PlayerStats","playerStats","player","Toolbar","ResponsiveReactGridLayout","WidthProvider","Responsive","dataComponents","toolboxComponents","Grid","createCard","el","undefined","getAllData","getStaticData","grid","i","data-grid","getAllDataByType","closeCard","layout","keyCounter","x","y","w","h","stateCopy","JSON","parse","stringify","_","reject","o","onLayoutChange","localStorage","setItem","getItem","document","body","classList","remove","add","cols","lg","md","sm","xs","xxs","rowHeight","draggableHandle","drag","EncounterMap","resetGrid","mapWidth","parseInt","getElementById","gridSize","fog","clearFog","drawGrid","size","rows","Math","ceil","mapHeight","fogs","d3","selectAll","attr","xpos","ypos","width","height","row","col","reveal","enter","append","d","on","saveFog","querySelectorAll","gridItem","getAttribute","toggleFog","revealToggle","hideToolbar","setAttribute","addEventListener","offsetHeight","defaultValue","EncounterTracker","EncounterMapRoute","useParams","EncounterTrackerRoute","App","getDataStore","stores","dataStore","nextId","field","imageData","image","Image","setTimeout","write","outerHTML","quests","encounters","interactions","path","children","Boolean","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.6234b71b.chunk.js","sourcesContent":["import React from \"react\";\n\nclass Card extends React.PureComponent {\n\n  updateData = (id, name, value) => {\n    this.props.updateData(this.props.data.id, this.componentName, name, value);\n  };\n\n  toolbar = tools => {\n    let toolbar = [];\n    tools = tools || ['add-location', 'add-character', 'add-encounter', 'delete'];\n    for (let type in tools) {\n      if (tools[type] === 'add-location') {\n        toolbar.push(\n          <button onClick={() => this.props.newCard('Location', this.props.data.id, this.componentName)}><i className=\"fas fa-globe-americas\"></i></button>\n        );\n      } else if (tools[type] === 'add-character') {\n        toolbar.push(\n          <button onClick={() => this.props.newCard('Character', this.props.data.id, this.componentName)}><i className=\"fas fa-user-alt\"></i></button>\n        );\n      } else if (tools[type] === 'add-encounter') {\n        toolbar.push(\n          <button onClick={() => this.props.newCard('Encounter', this.props.data.id, this.componentName)}><i className=\"fas fa-skull-crossbones\"></i></button>\n        );\n      } else if (tools[type] === 'delete') {\n        toolbar.push(\n          <button onClick={() => this.props.deleteCard(this.componentName, this.props.data.id)}><i className=\"fas fa-trash-alt\"></i></button>\n        );\n      } else if (tools[type] === 'encounter-map') {\n        if (this.props.data.map) {\n          toolbar.push(\n            <button onClick={() => window.open('/encounter-map/' + this.props.data.id)}><i className=\"fas fa-map\"></i></button>\n          );\n        }\n      } else if (tools[type] === 'encounter-tracker') {\n        toolbar.push(\n          <button onClick={() => window.open('/encounter-tracker/' + this.props.data.id)}><i className=\"fas fa-skull-crossbones\"></i></button>\n        );\n      } else if (tools[type] === 'add-player-stat') {\n        toolbar.push(\n          <button onClick={(e) => this.props.addData('PlayerStat')}><i className=\"fas fa-plus\"></i></button>\n        );\n      }\n    }\n    return toolbar;\n  };\n\n  render() {\n    return <section></section>;\n  }\n}\n\nexport default Card;","import React from \"react\";\n\nclass ContentEditable extends React.Component {\n\n  onBlur = (evt) => {\n    this.props.onBlur(this.props.hasOwnProperty('id') ? this.props.id : null, this.props.name, evt.target.innerText.trim());\n  };\n\n  render() {\n    const Element = `${this.props.tag}`;\n    return (\n      <Element\n        contentEditable={true}\n        suppressContentEditableWarning={true}\n        onBlur={this.onBlur}\n        placeholder={this.props.placeholder}\n        className={this.props.className ? this.props.className.join(' ') : ''}>\n          {this.props.content||''}\n      </Element>\n    );\n  }\n}\n\nexport default ContentEditable;\n","import React from \"react\";\n\nclass LocationList extends React.PureComponent {\n\n  render() {\n\n    const filteredLocations = this.props.locations.reduce((accumulator, location, delta) => {\n      if (location.parentId === this.props.parentId) {\n        accumulator.push(<li key={delta}>\n          <span className=\"card-minor-minor\">{location.type}</span>\n          <i className=\"fas fa-globe-americas\"></i>&nbsp;\n          <button\n            className=\"link\"\n            onClick={() => this.props.showCard('Location', location.id)}>\n              {location.name}\n          </button>\n        </li>);\n      }\n      return accumulator;\n    }, []);\n\n    // If some locations are found, show them.\n    if (filteredLocations.length) {\n      return (\n        <div>\n          <h3>Locations</h3>\n          <ul className=\"link-list\">\n            {filteredLocations}\n          </ul>\n        </div>\n      );\n    } else {\n      return '';\n    }\n  }\n}\n\nexport default LocationList;\n","import React from \"react\";\n\nclass CharacterList extends React.PureComponent {\n\n  render() {\n\n    const filtered = this.props.characters.reduce((accumulator, character, delta) => {\n      if (character.parentId === this.props.parentId && character.parentType === this.props.parentType) {\n        accumulator.push(<li key={delta}>\n          <span className=\"card-minor-minor\">{character.role}</span>\n          <i className=\"fas fa-user-alt\"></i>&nbsp;\n          <button\n            className=\"link\"\n            onClick={() => this.props.showCard('Character', character.id)}>\n              {character.name}\n          </button>\n        </li>);\n      }\n      return accumulator;\n    }, []);\n\n    // If some locations are found, show them.\n    if (filtered.length) {\n      return (\n        <div>\n          <h3>Characters</h3>\n          <ul className=\"link-list\">\n            {filtered}\n          </ul>\n        </div>\n      );\n    } else {\n      return '';\n    }\n  }\n}\n\nexport default CharacterList;\n","import React from \"react\";\nimport Card from \"components/Card\";\nimport ContentEditable from \"components/ContentEditable\";\nimport LocationList from 'components/LocationList.js';\nimport CharacterList from 'components/CharacterList.js';\n\nclass Location extends Card {\n\n  constructor(props) {\n    super(props);\n    this.componentName = 'Location';\n    this.state = {mapInput: false};\n  }\n\n  changeMap = () => {\n    this.setState({mapInput: !this.state.mapInput});\n  }\n\n  render() {\n\n    let parentLocation = '';\n\n    if (this.props.data) {\n      const parentLocationData = this.props.getData('Location', this.props.data.parentId);\n\n      if (parentLocationData) {\n        parentLocation = <span class=\"card-minor\" style={{float: 'right'}}>\n          <i className=\"fas fa-globe-americas\"></i>\n          &nbsp;\n          <button\n            className=\"link\"\n            onClick={() => this.props.showCard('Location', parentLocationData.id)}>\n              {parentLocationData.name}\n          </button>\n        </span>\n      }\n    }\n\n    let mapPreview = this.props.data.map ? <button className=\"link\" onClick={(e) => this.props.open('image', 'Location', this.props.data.id, 'map')}><img src={this.props.data.map} className=\"map-preview\"/></button> : '';\n\n    return (\n      <section className=\"card\">\n        <div className=\"card-header\">\n          <span className=\"card__type\"><i className=\"fas fa-globe-americas\"></i> Location</span>\n        </div>\n        <div className=\"card-body\">\n          <ContentEditable\n            tag=\"span\"\n            onBlur={this.updateData}\n            name=\"type\"\n            content={this.props.data.type || ''}\n            placeholder=\"Type\"\n            className={[\"card-minor\"]}\n          />\n          {parentLocation}\n          <ContentEditable\n            tag=\"h2\"\n            onBlur={this.updateData}\n            name=\"name\"\n            content={this.props.data.name || ''}\n            placeholder=\"Name\"\n            className={[\"card-title\"]}\n          />\n          {mapPreview}\n          <div>\n            <button className=\"link\" onClick={this.changeMap}>\n              <i className=\"fas fa-map\"></i> Map\n            </button>\n            <ContentEditable\n              tag=\"p\"\n              onBlur={this.updateData}\n              name=\"map\"\n              content={this.props.data.map || ''}\n              placeholder=\"Image URL\"\n              className={[\"single-line\", !this.state.mapInput ? 'hidden' : '']}\n            />\n          </div>\n          <ContentEditable\n            tag=\"p\"\n            onBlur={this.updateData}\n            name=\"description\"\n            content={this.props.data.description || ''}\n            placeholder=\"Description\"\n          />\n          <LocationList\n            locations={this.props.allData['locations']}\n            showCard={this.props.showCard}\n            parentId={this.props.data.id}\n            parentType=\"Location\"\n          />\n          <CharacterList\n            characters={this.props.allData['characters']}\n            showCard={this.props.showCard}\n            parentId={this.props.data.id}\n            parentType=\"Location\"\n          />\n        </div>\n        <div className=\"card-footer\">\n          {this.toolbar()}\n        </div>\n      </section>\n    );\n\n  }\n}\n\nexport default Location;\n","import React from \"react\";\nimport ContentEditable from \"components/ContentEditable\";\n\nclass InteractionList extends React.PureComponent {\n\n  updateData = (id, name, value) => {\n    console.log(id + name + value);\n    this.props.updateData(id, \"Interaction\", name, value);\n  };\n\n  addInteraction = () => {\n    this.props.addData(\"Interaction\", this.props.parentId, this.props.parentType);\n  }\n\n  render() {\n\n    const filtered = this.props.allData['interactions'].reduce((accumulator, interaction, delta) => {\n      if (interaction.parentId === this.props.parentId) {\n        accumulator.push(<ContentEditable\n          tag=\"p\"\n          onBlur={this.updateData}\n          name=\"name\"\n          content={interaction.name || ''}\n          placeholder=\"name\"\n          id={interaction.id}\n        />);\n      }\n      return accumulator;\n    }, []);\n\n    // If some locations are found, show them.\n    return (\n      <div>\n        <h3>Interactions\n          <button className=\"link\" onClick={this.addInteraction}>\n            <i className=\"fas fa-user-plus\"></i>\n          </button>\n        </h3>\n\n        {filtered}\n      </div>\n    );\n  }\n}\n\nexport default InteractionList;\n","import React from \"react\";\nimport Card from \"components/Card\";\nimport InteractionList from \"components/InteractionList\";\nimport ContentEditable from \"components/ContentEditable\";\n\nclass Character extends Card {\n\n  constructor(props) {\n    super(props);\n    this.componentName = 'Character';\n  }\n\n  render() {\n\n    const location = this.props.getData('Location', this.props.data.parentId);\n    let parentLocation = '';\n    if (location) {\n      parentLocation = <span class=\"card-minor\" style={{float: 'right'}}>\n        <i className=\"fas fa-globe-americas\"></i>\n        &nbsp;\n        <button\n          className=\"link\"\n          onClick={() => this.props.showCard('Location', location.id)}>\n            {location.name}\n        </button>\n      </span>\n    }\n\n    return (\n      <section className=\"card\">\n        <div className=\"card-header\">\n          <span className=\"card__type\"><i className=\"fas fa-user-alt\"></i> Character</span>\n        </div>\n        <div className=\"card-body\">\n\n          <ContentEditable\n            tag=\"span\"\n            onBlur={this.updateData}\n            name=\"role\"\n            content={this.props.data.role || ''}\n            placeholder=\"Job/role\"\n            className={[\"card-minor\"]}\n          />\n          {parentLocation}\n          <ContentEditable\n            tag=\"h2\"\n            onBlur={this.updateData}\n            name=\"name\"\n            content={this.props.data.name || ''}\n            placeholder=\"Name\"\n            className={[\"card-title\"]}\n          />\n          <ContentEditable\n            tag=\"p\"\n            onBlur={this.updateData}\n            name=\"description\"\n            content={this.props.data.description || ''}\n            placeholder=\"Description\"\n          />\n          <h3>Motivations</h3>\n          <ContentEditable\n            tag=\"p\"\n            onBlur={this.updateData}\n            name=\"motivations\"\n            content={this.props.data.motivations || ''}\n            placeholder=\"none\"\n          />\n          <h3>Weaknesses</h3>\n          <ContentEditable\n            tag=\"p\"\n            onBlur={this.updateData}\n            name=\"weaknesses\"\n            content={this.props.data.weaknesses || ''}\n            placeholder=\"none\"\n          />\n          <InteractionList\n            parentId={this.props.data.id}\n            parentType={this.componentName}\n            updateData={this.props.updateData}\n            addData={this.props.addData}\n            allData={this.props.allData}\n          />\n        </div>\n        <div className=\"card-footer\">\n          {this.toolbar(['delete'])}\n        </div>\n      </section>\n    );\n\n  }\n}\n\nexport default Character;\n","import React from \"react\";\nimport Card from \"components/Card\";\nimport ContentEditable from \"components/ContentEditable\";\n\nclass Quest extends Card {\n\n  constructor(props) {\n    super(props);\n    this.componentName = 'Quest';\n  }\n\n  render() {\n\n    return (\n      <section className=\"card\">\n        <div className=\"card-header\">\n          <span className=\"card__type\"><i className=\"fas fa-scroll\"></i> Quest</span>\n        </div>\n        <div className=\"card-body\">\n          <ContentEditable\n            tag=\"h2\"\n            onBlur={this.updateData}\n            name=\"name\"\n            content={this.props.data.name || ''}\n            placeholder=\"Name\"\n            className={[\"card-title\"]}\n          />\n          <ContentEditable\n            tag=\"p\"\n            onBlur={this.updateData}\n            name=\"description\"\n            content={this.props.data.description || ''}\n            placeholder=\"Description\"\n          />\n        </div>\n        <div className=\"card-footer\">\n          {this.toolbar()}\n        </div>\n      </section>\n    );\n\n  }\n}\n\nexport default Quest;\n","import React from \"react\";\n\nclass MonsterList extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.state = {selectedMonsters: this.props.selectedMonsters || []};\n    this.updateData = this.updateData.bind(this);\n  }\n\n  getMonsterList = (selectedId, delta, count) => {\n    return <div>\n      <select onChange={(e) => {this.updateData(delta, e.target.value)}} value={selectedId}>\n        {this.props.monsterList.map((monster) => {\n          return <option value={monster.id}>{monster.name}</option>\n        })}\n      </select> x&nbsp;\n      <input type=\"number\" value={count} onChange={(e) => {this.updateData(delta, null, e.target.value)}}/>\n      &nbsp;\n      <button className=\"link\" onClick={(e) => {this.deleteMonster(delta)}}>\n        <i className=\"fas fa-times\"></i>\n      </button>\n    </div>\n  }\n\n  updateData = (deltaId, monsterId, count) => {\n    let selectedMonsters = this.state.selectedMonsters.map((monster, delta) => {\n      if (deltaId === delta) {\n        return {\n          id: monsterId || monster.id,\n          count: count || monster.count\n        }\n      }\n      return monster;\n    });\n    this.setState({selectedMonsters: selectedMonsters});\n    this.props.updateData(this.props.parentId, 'Encounter', 'monsters', selectedMonsters);\n  };\n\n  addMonster = () => {\n    const selectedMonsters = this.state.selectedMonsters.concat({id:1,count:1});\n    this.setState({selectedMonsters:selectedMonsters})\n    this.props.updateData(this.props.parentId, 'Encounter', 'monsters', selectedMonsters);\n  }\n\n  deleteMonster = (delta) => {\n    const selectedMonsters = this.state.selectedMonsters.reduce(( acc, monster, index ) => {\n      if (index !== delta) {\n        acc.push(monster);\n      }\n      return acc;\n    },[]);\n    this.setState({selectedMonsters: selectedMonsters});\n    this.props.updateData(this.props.parentId, 'Encounter', 'monsters', selectedMonsters);\n  }\n\n  render() {\n\n    let selectedMonsters = this.props.selectedMonsters ? this.props.selectedMonsters.map((monster, delta) => {\n      return this.getMonsterList(monster.id, delta, monster.count);\n    }) : [];\n\n    // If some locations are found, show them.\n    return (\n      <div>\n        <h3>Monsters\n          <button className=\"link\" onClick={this.addMonster}>\n            <i className=\"fas fa-spider\"></i>\n          </button>\n        </h3>\n        {selectedMonsters}\n      </div>\n    );\n  }\n}\n\nexport default MonsterList;\n","import React from \"react\";\nimport Card from \"components/Card\";\nimport MonsterList from \"components/MonsterList\";\nimport ContentEditable from \"components/ContentEditable\";\n\nclass Encounter extends Card {\n\n  constructor(props) {\n    super(props);\n    this.componentName = 'Encounter';\n    this.state = {mapInput: false};\n  }\n\n  changeMap = () => {\n    this.setState({mapInput: !this.state.mapInput});\n  }\n\n  render() {\n    let mapPreview = this.props.data.map ? <button className=\"link\" onClick={(e) => this.props.open('image', 'Encounter', this.props.data.id, 'map')}><img src={this.props.data.map} className=\"map-preview\"/></button> : '';\n\n    return (\n      <section className=\"card\">\n        <div className=\"card-header\">\n          <span className=\"card__type\"><i className=\"fas fa-skull-crossbones\"></i> Encounter</span>\n        </div>\n        <div className=\"card-body\">\n          <ContentEditable\n            tag=\"h2\"\n            onBlur={this.updateData}\n            name=\"name\"\n            content={this.props.data.name || ''}\n            placeholder=\"Name\"\n            className={[\"card-title\"]}\n          />\n          {mapPreview}\n          <div>\n            <button className=\"link\" onClick={this.changeMap}>\n              <i className=\"fas fa-map\"></i> Map\n            </button>\n            <ContentEditable\n              tag=\"p\"\n              onBlur={this.updateData}\n              name=\"map\"\n              content={this.props.data.map || ''}\n              placeholder=\"Image URL\"\n              className={[\"single-line\", !this.state.mapInput ? 'hidden' : '']}\n            />\n          </div>\n          <ContentEditable\n            tag=\"p\"\n            onBlur={this.updateData}\n            name=\"description\"\n            content={this.props.data.description || ''}\n            placeholder=\"Description\"\n          />\n          <MonsterList\n            parentId={this.props.data.id}\n            parentType={this.componentName}\n            updateData={this.props.updateData}\n            addData={this.props.addData}\n            allData={this.props.allData}\n            selectedMonsters={this.props.data.monsters}\n            monsterList={this.props.staticData['monsters']}\n          />\n          <h3>Tactics</h3>\n          <ContentEditable\n            tag=\"p\"\n            onBlur={this.updateData}\n            name=\"tactics\"\n            content={this.props.data.tactics || ''}\n            placeholder=\"none\"\n          />\n          <h3>Environmental</h3>\n          <ContentEditable\n            tag=\"p\"\n            onBlur={this.updateData}\n            name=\"environmental\"\n            content={this.props.data.environmental || ''}\n            placeholder=\"none\"\n          />\n        </div>\n        <div className=\"card-footer\">\n          {this.toolbar(['encounter-map', 'encounter-tracker', 'delete'])}\n        </div>\n      </section>\n    );\n\n  }\n}\n\nexport default Encounter;\n","import React from \"react\";\nimport Card from \"components/Card\";\n\nclass Search extends Card {\n\n  constructor(props) {\n    super(props);\n    this.componentName = 'Search';\n    this.state = {\n      search: ''\n    }\n  }\n\n  search = (e) => {\n    this.setState({search: e.target.value});\n  }\n\n  render() {\n    let filtered = [];\n    let dataStoreTypes = this.props.getDataStoreTypes();\n    for (let key in dataStoreTypes) {\n      if (!['Interaction', 'PlayerStat'].includes(dataStoreTypes[key].component)) {\n        if (this.props.allData[dataStoreTypes[key].store]) {\n          filtered.push(this.props.allData[dataStoreTypes[key].store].reduce((accumulator, item, delta) => {\n            if (item.name.toLowerCase().includes(this.state.search.toLowerCase())) {\n              accumulator.push(<li key={delta}>\n                <span className=\"fa-li\"><i className={[dataStoreTypes[key].icon, 'fa'].join(' ')}></i></span>\n                <span className=\"card-minor-minor\">{item.type || item.role}</span>\n                <button\n                  className=\"link\"\n                  onClick={() => this.props.showCard(dataStoreTypes[key].component, item.id)}>\n                    {item.name}\n                </button>\n              </li>);\n            }\n            return accumulator;\n          }, []));\n        }\n      }\n    }\n\n    return (\n      <section className=\"card\">\n        <div className=\"card-header\">\n          <span className=\"card__type\"><i className=\"fas fa-search\"></i> Search</span>\n        </div>\n\n        <div className=\"card-body\">\n          <div className=\"search-box\">\n            <input type=\"text\" onChange={this.search} placeholder=\"Search\"/>\n          </div>\n          <ul className=\"fa-ul search-results\">\n            {filtered}\n          </ul>\n        </div>\n      </section>\n    );\n\n  }\n}\n\nexport default Search;\n","import React from \"react\";\nimport ContentEditable from \"components/ContentEditable\";\n\nclass PlayerStat extends React.PureComponent {\n\n  updateData = (id, name, value) => {\n    this.props.updateData(this.props.data.id, 'PlayerStat', name, value);\n  }\n\n  render() {\n\n    return (\n      <tr>\n        <td>\n          <ContentEditable\n            tag=\"span\"\n            name=\"name\"\n            content={this.props.data.name || ''}\n            placeholder=\"Name\"\n            onBlur={this.updateData}\n          />\n        </td>\n        <td>\n          <ContentEditable\n            tag=\"span\"\n            name=\"class\"\n            content={this.props.data.class || ''}\n            placeholder=\"Class\"\n            onBlur={this.updateData}\n          />\n        </td>\n        <td>\n          <ContentEditable\n            tag=\"span\"\n            name=\"pp\"\n            content={this.props.data.pp || ''}\n            placeholder=\"PP\"\n            onBlur={this.updateData}\n          />\n        </td>\n        <td>\n          <ContentEditable\n            tag=\"span\"\n            name=\"ac\"\n            content={this.props.data.ac || ''}\n            placeholder=\"AC\"\n            onBlur={this.updateData}\n          />\n        </td>\n        <td>\n          <ContentEditable\n            tag=\"span\"\n            name=\"proficiencies\"\n            content={this.props.data.proficiencies || ''}\n            placeholder=\"Proficiencies\"\n            onBlur={this.updateData}\n          />\n        </td>\n        <td>\n          <ContentEditable\n            tag=\"span\"\n            name=\"languages\"\n            content={this.props.data.languages || ''}\n            placeholder=\"Languages\"\n            onBlur={this.updateData}\n          />\n        </td>\n        <td>\n          <button className=\"link\" onClick={(e) => {this.props.deleteData('PlayerStat', this.props.data.id)}}>\n            <i className=\"fas fa-times\"></i>\n          </button>\n        </td>\n      </tr>\n    );\n\n  }\n}\n\nexport default PlayerStat;\n","import React from \"react\";\nimport Card from \"components/Card\";\nimport PlayerStat from 'components/PlayerStat';\n\nclass PlayerStats extends Card {\n\n  constructor(props) {\n    super(props);\n    this.componentName = 'PlayerStats';\n  }\n\n  render() {\n\n    const data = this.props.allData['playerStats'];\n    let playerStats = data.map((player, delta) => {\n      return <PlayerStat data={player} updateData={this.props.updateData} deleteData={this.props.deleteData}/>\n    });\n\n    return (\n      <section className=\"card\">\n        <div className=\"card-header\">\n          <span className=\"card__type\">\n            <i className=\"fas fa-user-alt\"></i> Player stats\n          </span>\n        </div>\n        <div className=\"card-body\">\n          <table className=\"playerStats\">\n            <thead>\n              <tr>\n                <th>Name</th>\n                <th>Class</th>\n                <th>PP</th>\n                <th>AC</th>\n                <th>Proficiencies</th>\n                <th>Languages</th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>{playerStats}</tbody>\n          </table>\n        </div>\n        <div className=\"card-footer\">\n          {this.toolbar(['add-player-stat'])}\n        </div>\n      </section>\n    );\n\n  }\n}\n\nexport default PlayerStats;\n","import React from \"react\";\n\nclass Toolbar extends React.PureComponent {\n\n  render() {\n\n    return <section className=\"toolbar\">\n      <button onClick={() => this.props.showCard('Search')}><i className=\"fas fa-fw fa-search\"></i></button>\n      <button onClick={() => this.props.newCard('Location', null)}><i className=\"fas fa-fw fa-globe-americas\"></i></button>\n      <button onClick={() => this.props.newCard('Character', null)}><i className=\"fas fa-fw fa-user-alt\"></i></button>\n      <button onClick={() => this.props.newCard('Quest', null)}><i className=\"fas fa-fw fa-scroll\"></i></button>\n      <button onClick={() => this.props.newCard('Encounter', null)}><i className=\"fas fa-fw fa-skull-crossbones\"></i></button>\n      <button onClick={() => this.props.showCard('PlayerStats', null)}><i className=\"fas fa-fw fa-users\"></i></button>\n    </section>;\n  }\n}\n\nexport default Toolbar;","import React from \"react\";\nimport { WidthProvider, Responsive } from \"react-grid-layout\";\nimport Location from 'components/Location';\nimport Character from 'components/Character';\nimport Quest from 'components/Quest';\nimport Encounter from 'components/Encounter';\nimport Search from 'components/Search';\nimport PlayerStats from 'components/PlayerStats';\nimport Toolbar from \"components/Toolbar\";\nimport _ from \"lodash\";\nimport 'react-grid-layout/css/styles.css';\nimport 'react-resizable/css/styles.css';\n\nconst ResponsiveReactGridLayout = WidthProvider(Responsive);\nconst dataComponents = {\n  Location: Location,\n  Character: Character,\n  Quest: Quest,\n  Encounter: Encounter\n};\nconst toolboxComponents = {\n  Search: Search,\n  PlayerStats: PlayerStats\n}\n\nclass Grid extends React.Component {\n\n  constructor(props) {\n    super(props);\n    const layout = JSON.parse(localStorage.getItem('gm-tools-layout')) || {\n      layout: [],\n      keyCounter: 2\n    };\n    this.state = {\n      layout: layout\n    };\n  }\n\n  static get defaultProps() {\n    return {\n      className: \"layout\",\n      cols: { lg: 8, md: 10, sm: 6, xs: 4, xxs: 2 },\n      rowHeight: 100,\n      draggableHandle: \".card-header\"\n    };\n  }\n\n  createCard = el => {\n    let Component = dataComponents[el.component.type];\n    if (Component !== undefined) {\n      const data = this.props.getData(el.component.type, el.component.id);\n      const allData = this.props.getAllData();\n      const staticData = this.props.getStaticData();\n      return (\n        <div key={el.grid.i} data-grid={el.grid}>\n          <Component\n            data={data}\n            allData={allData}\n            staticData={staticData}\n            showCard={this.showCard}\n            newCard={this.newCard}\n            deleteCard={this.deleteCard}\n            updateData={this.props.updateData}\n            getAllDataByType={this.props.getAllDataByType}\n            getData={this.props.getData}\n            addData={this.props.addData}\n            open={this.props.open}\n          />\n          <span className=\"card-close\" onClick={(e) => this.closeCard(el.grid.i)}><i className=\"fas fa-times\"></i></span>\n        </div>\n      );\n    }\n\n    Component = toolboxComponents[el.component.type];\n    if (Component !== undefined) {\n      const allData = this.props.getAllData();\n      return (\n        <div key={el.grid.i} data-grid={el.grid}>\n          <Component\n            allData={allData}\n            showCard={this.showCard}\n            getData={this.props.getData}\n            getDataStoreTypes={this.props.getDataStoreTypes}\n            updateData={this.props.updateData}\n            deleteData={this.props.deleteData}\n            addData={this.props.addData}\n          />\n          <span className=\"card-close\" onClick={(e) => this.closeCard(el.grid.i)}><i className=\"fas fa-times\"></i></span>\n        </div>\n      );\n    }\n  }\n\n  showCard = (type, id) => {\n    let Component = dataComponents[type];\n    if (Component !== undefined) {\n      this.setState({\n        layout: {\n          layout: this.state.layout.layout.concat({\n            grid: {\n              i: 'n' + this.state.layout.keyCounter,\n              x: 0,\n              y: 0,\n              w: 2,\n              h: 4,\n            },\n            component: {id:id, type:type}\n          }),\n          keyCounter: this.state.layout.keyCounter + 1\n        }\n      });\n      return;\n    }\n\n    Component = toolboxComponents[type];\n    if (Component !== undefined) {\n      this.setState({\n        layout: {\n          layout: this.state.layout.layout.concat({\n            grid: {\n              i: 'n' + this.state.layout.keyCounter,\n              x: 0,\n              y: 0,\n              w: 2,\n              h: 4,\n            },\n            component: {type:type}\n          }),\n          keyCounter: this.state.layout.keyCounter + 1\n        }\n      });\n      return;\n    }\n\n  }\n\n  newCard = (type, parentId, parentType) => {\n    this.showCard(type, this.props.addData(type, parentId, parentType));\n  }\n\n  deleteCard = (type, id) => {\n    let stateCopy = JSON.parse(JSON.stringify(this.state));\n    stateCopy.layout.layout = _.reject(stateCopy.layout.layout, function(o) { return o.component.id === id; });\n    this.setState(stateCopy);\n    this.props.deleteData(type, id);\n  }\n\n  closeCard = (i) => {\n    let stateCopy = JSON.parse(JSON.stringify(this.state));\n    stateCopy.layout.layout = _.reject(stateCopy.layout.layout, function(o) { return o.grid.i === i; });\n    this.setState(stateCopy);\n  }\n\n  onLayoutChange = layout => {\n    let stateCopy = JSON.parse(JSON.stringify(this.state));\n    for (let i in layout) {\n      stateCopy.layout.layout[i].grid = {...stateCopy.layout.layout[i].grid, ...layout[i]};\n    }\n    this.setState(stateCopy);\n    localStorage.setItem(\"gm-tools-layout\", JSON.stringify(stateCopy.layout));\n  }\n\n  render() {\n    if (!this.state.layout.layout.length) {\n      document.body.classList.add('empty');\n    } else {\n      document.body.classList.remove('empty');\n    }\n    return (\n      <div className=\"frame\">\n        <div className=\"start\">\n          <i className=\"fas fa-plus\"></i>\n          <div>Add a card using the toolbar</div>\n        </div>\n        <div className=\"grid\">\n          <ResponsiveReactGridLayout\n              {...this.props}\n              onLayoutChange={this.onLayoutChange}\n            >\n              {_.map(this.state.layout.layout, el => this.createCard(el))}\n          </ResponsiveReactGridLayout>\n        </div>\n        <Toolbar\n          newCard={this.newCard}\n          showCard={this.showCard}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Grid;\n","import React from \"react\";\nimport * as d3 from \"d3\";\n\nlet drag = false;\n\nclass EncounterMap extends React.Component {\n\n  constructor(props) {\n    super(props);\n    let data = this.props.getData('Encounter', this.props.id);\n    if (!data.grid) {\n      data.grid = {gridSize: 125, mapWidth: 2000, clearFog: false, fog: []};\n    }\n    this.state = {data: data};\n    this.revealToggle = true;\n    document.body.classList.add('encounter-map');\n  }\n\n  componentDidMount() {\n    document.getElementById('encounter-grid').addEventListener('mousedown', () => drag = true);\n    document.addEventListener('mouseup', () => {drag = false; this.saveFog(this)});\n\n    let stateCopy = JSON.parse(JSON.stringify(this.state));\n    stateCopy.data.grid.mapHeight = document.getElementById('encounter-grid').offsetHeight;\n    this.setState(stateCopy);\n    this.drawGrid(stateCopy.data.grid);\n  }\n\n  resetGrid = () => {\n    let mapWidth = parseInt(document.getElementById('mapWidth').value);\n    let gridSize = parseInt(document.getElementById('gridSize').value);\n\n    let stateCopy = JSON.parse(JSON.stringify(this.state));\n    stateCopy.data.grid['mapWidth'] = mapWidth;\n    stateCopy.data.grid['gridSize'] = gridSize;\n    stateCopy.data.grid.fog = [];\n    stateCopy.data.grid.clearFog = false;\n    this.setState(stateCopy);\n    this.drawGrid(stateCopy.data.grid);\n  }\n\n  drawGrid = (grid) => {\n    let size = grid.gridSize;\n    let rows = Math.ceil(grid.mapHeight / size);\n    let cols = Math.ceil(grid.mapWidth / size);\n    let fogs = grid.fog;\n    let clearFog = grid.clearFog;\n\n    function gridData() {\n      var data = [];\n      var xpos = 1;\n      var ypos = 1;\n      var width = size;\n      var height = size;\n\n      // iterate for rows\n\n      for (var row = 0; row < rows; row++) {\n        data.push([]);\n        // iterate for cells/columns inside rows\n        for (var col = 0; col < cols; col++) {\n          let reveal = true;\n          if (!clearFog) {\n            reveal = false;\n            for (const fog of fogs) {\n              if (parseInt(fog.row) === row && parseInt(fog.col) === col) {\n                reveal = true;\n                break;\n              }\n            }\n          }\n          data[row].push({\n            x: xpos,\n            y: ypos,\n            width: width,\n            height: height,\n            row: row,\n            col: col,\n            reveal: reveal\n          })\n          // increment the x position. I.e. move it over by 50 (width variable)\n          xpos += width;\n        }\n        // reset the x position after a row is complete\n        xpos = 1;\n        // increment the y position for the next row. Move it down 50 (height variable)\n        ypos += height;\n      }\n      return data;\n    }\n\n    d3.select(\"#encounter-grid__svg\").selectAll(\"*\").remove();\n\n    var dataGrid = d3.select(\"#encounter-grid__svg\")\n      .attr(\"width\",(cols * size) + \"px\")\n      .attr(\"height\",(rows * size) + \"px\");\n\n    var row = dataGrid.selectAll(\".row\")\n      .data(gridData)\n      .enter().append(\"g\")\n      .attr(\"class\", \"row\");\n\n    row.selectAll(\".square\")\n      .data(function(d) { return d; })\n      .enter().append(\"rect\")\n      .attr(\"class\",function(d) { return d.reveal ? 'square reveal' : 'square'; })\n      .attr(\"x\", function(d) { return d.x; })\n      .attr(\"y\", function(d) { return d.y; })\n      .attr(\"data-reveal\", function(d) { return d.reveal })\n      .attr(\"data-row\", function(d) { return d.row; })\n      .attr(\"data-col\", function(d) { return d.col; })\n      .attr(\"width\", function(d) { return d.width; })\n      .attr(\"height\", function(d) { return d.height; })\n      .on('mousedown', function(d) {\n          d3.select(this).attr(\"class\", \"square reveal\").attr('data-reveal', true);\n      })\n      .on('mouseover', function(d) {\n        if (drag) {\n          d3.select(this).attr(\"class\", \"square reveal\").attr('data-reveal', true);\n        }\n      });\n  }\n\n  saveFog = () => {\n    let fog = [];\n    const grid = document.querySelectorAll(\".square[data-reveal=true]\");\n    for (const gridItem of grid) {\n      fog.push({\n        row: gridItem.getAttribute('data-row'),\n        col: gridItem.getAttribute('data-col')\n      });\n    }\n    let stateCopy = JSON.parse(JSON.stringify(this.state));\n    stateCopy.data.grid.fog = fog;\n    this.setState(stateCopy);\n    this.props.updateData(this.props.id, 'Encounter', 'grid', stateCopy.data.grid);\n  }\n\n  toggleFog = () => {\n    const grid = document.querySelectorAll(\".square[data-reveal=false]\");\n    for (const gridItem of grid) {\n      if (this.revealToggle) {\n        gridItem.classList.add(\"tempReveal\");\n      } else {\n        gridItem.classList.remove(\"tempReveal\");\n      }\n    }\n    this.revealToggle = !this.revealToggle;\n  }\n\n  clearFog = () => {\n    const grid = document.querySelectorAll(\".square[data-reveal=false]\");\n    for (const gridItem of grid) {\n      gridItem.classList.add(\"reveal\");\n    }\n\n    let stateCopy = JSON.parse(JSON.stringify(this.state));\n    stateCopy.data.grid.fog = [];\n    stateCopy.data.grid.clearFog = true;\n    this.setState(stateCopy);\n    this.props.updateData(this.props.id, 'Encounter', 'grid', stateCopy.data.grid);\n  }\n\n  hideToolbar = () => {\n    document.getElementById('encounter-grid__controls').setAttribute('style', 'display: none;');\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"encounter-grid__controls\" id='encounter-grid__controls'>\n          <label>Map size</label>\n          <input type=\"number\" defaultValue={this.state.data.grid.mapWidth} id=\"mapWidth\"/>px\n          <label>Grid size</label>\n          <input type=\"number\" defaultValue={this.state.data.grid.gridSize} id=\"gridSize\"/>px\n          <input type=\"submit\" value=\"Reset grid\" onClick={this.resetGrid}/>\n          <input type=\"submit\" value=\"Toggle fog\" onClick={this.toggleFog}/>\n          <input type=\"submit\" value=\"Clear fog\" onClick={this.clearFog}/>\n          <input type=\"submit\" value=\"Hide controls\" onClick={this.hideToolbar}/>\n        </div>\n        <div\n          id=\"encounter-grid\"\n          className=\"encounter-grid\"\n        >\n          <img src={this.state.data.map} width={this.state.data.grid.mapWidth + 'px'}/>\n          <svg id=\"encounter-grid__svg\"></svg>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default EncounterMap;\n","import React from \"react\";\n\nclass EncounterTracker extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {data: this.props.getData('Encounter', this.props.id)};\n    document.body.classList.add('encounter-tracker');\n  }\n\n  render() {\n    return (\n      <div>\n\n      </div>\n    )\n  }\n}\n\nexport default EncounterTracker;\n","import React from \"react\";\nimport Grid from 'components/Grid';\nimport EncounterMap from 'components/EncounterMap';\nimport EncounterTracker from 'components/EncounterTracker';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  useParams\n} from \"react-router-dom\";\nimport _ from \"lodash\";\nimport monsters from 'data/monsters.json';\nimport '@fortawesome/fontawesome-free/js/all.min.js';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './css/styles.css';\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: JSON.parse(localStorage.getItem('gm-tools-data')) || {\n        locations: [],\n        characters: [],\n        quests: [],\n        encounters: [],\n        interactions: [],\n        playerStats: [],\n        nextId: 1\n      }\n    };\n    this.getData = this.getData.bind(this);\n    this.getAllDataByType = this.getAllDataByType.bind(this);\n    this.updateData = this.updateData.bind(this);\n    this.getAllData = this.getAllData.bind(this);\n    this.addData = this.addData.bind(this);\n    this.deleteData = this.deleteData.bind(this);\n    this.open = this.open.bind(this);\n    this.getDataStoreTypes = this.getDataStoreTypes.bind(this);\n  }\n\n  getDataStore = (type) => {\n    const stores = this.getDataStoreTypes();\n    for (let store in stores) {\n      if (stores[store].component === type) {\n        return stores[store].store;\n      }\n    }\n    return null;\n  }\n\n  getDataStoreTypes = () => {\n    return [\n      {component: 'Location', store: 'locations', icon: 'fa-globe-americas'},\n      {component: 'Character', store: 'characters', icon: 'fa-user-alt'},\n      {component: 'Quest', store: 'quests', icon: 'fa-scroll'},\n      {component: 'Encounter', store: 'encounters', icon: 'fa-skull-crossbones'},\n      {component: 'Interaction', store: 'interactions', icon: 'fa-people-arrows'},\n      {component: 'PlayerStat', store: 'playerStats', icon: 'fa-users'},\n    ];\n  }\n\n  getAllData = () => {\n    return this.state.data;\n  }\n\n  getData = (type, id) => {\n    id = parseInt(id);\n    let dataStore = this.getDataStore(type);\n    for (const delta in this.state.data[dataStore]) {\n      if (this.state.data[dataStore][delta].id === id) {\n        return this.state.data[dataStore][delta];\n      }\n    }\n  }\n\n  getStaticData = () => {\n    return {\"monsters\":monsters};\n  }\n\n  getAllDataByType = (type) => {\n    let dataStore = this.getDataStore(type);\n    return this.state.data[dataStore];\n  }\n\n  updateData = (id, type, name, value) => {\n    id = parseInt(id);\n    let dataStore = this.getDataStore(type);\n    for (let delta in this.state.data[dataStore]) {\n      if (this.state.data[dataStore][delta].id === id) {\n        let stateCopy = JSON.parse(JSON.stringify(this.state));\n        stateCopy.data[dataStore][delta][name] = value;\n        this.setState(stateCopy);\n        localStorage.setItem(\"gm-tools-data\", JSON.stringify(stateCopy.data));\n        return;\n      }\n    }\n  }\n\n  deleteData = (type, id) => {\n    let dataStore = this.getDataStore(type);\n    let stateCopy = JSON.parse(JSON.stringify(this.state));\n    stateCopy.data[dataStore] = _.reject(stateCopy.data[dataStore], function(o) { return o.id === id; });\n    this.setState(stateCopy);\n    localStorage.setItem(\"gm-tools-data\", JSON.stringify(stateCopy.data));\n  }\n\n  addData = (type, parentId, parentType) => {\n    let dataStore = this.getDataStore(type);\n    let stateCopy = JSON.parse(JSON.stringify(this.state));\n    stateCopy.data.nextId++;\n    stateCopy.data[dataStore].push({\n      id: stateCopy.data.nextId,\n      parentId: parentId ? parentId : null,\n      parentType: parentType ? parentType : null,\n      name: 'New ' + type\n    });\n    this.setState(stateCopy);\n    localStorage.setItem(\"gm-tools-data\", JSON.stringify(stateCopy.data));\n    return stateCopy.data.nextId;\n  }\n\n  open = (style, type, id, field) => {\n    if (style === 'image') {\n      const imageData = this.getData(type, id);\n      if (imageData) {\n        let w = window.open('about:blank');\n        let image = new Image();\n        image.src = imageData[field];\n        image.style = \"width: 100%\";\n        setTimeout(function(){\n          w.document.write(image.outerHTML);\n        }, 0);\n      }\n    }\n  }\n\n  render() {\n    return (\n      <main>\n        <Router>\n          <Switch>\n            <Route path=\"/encounter-map/:id\" children={<EncounterMapRoute getData={this.getData} updateData={this.updateData}/>}/>\n            <Route path=\"/encounter-tracker/:id\" children={<EncounterTrackerRoute getData={this.getData} updateData={this.updateData}/>}/>\n            <Route path=\"/\">\n              <Grid\n                getData={this.getData}\n                getAllDataByType={this.getAllDataByType}\n                updateData={this.updateData}\n                getAllData={this.getAllData}\n                getStaticData={this.getStaticData}\n                addData={this.addData}\n                deleteData={this.deleteData}\n                getDataStoreTypes={this.getDataStoreTypes}\n                open={this.open}\n              />\n            </Route>\n          </Switch>\n        </Router>\n      </main>\n    );\n\n  }\n}\n\nfunction EncounterMapRoute(props) {\n  // We can use the `useParams` hook here to access\n  // the dynamic pieces of the URL.\n  let { id } = useParams();\n\n  return (\n    <EncounterMap\n      getData={props.getData}\n      updateData={props.updateData}\n      id={id}\n    />\n  );\n}\n\nfunction EncounterTrackerRoute(props) {\n  // We can use the `useParams` hook here to access\n  // the dynamic pieces of the URL.\n  let { id } = useParams();\n\n  return (\n    <EncounterTracker\n      getData={props.getData}\n      updateData={props.updateData}\n      id={id}\n    />\n  );\n}\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}